{"version":3,"sources":["data-viz/RadialChart.jsx","data-viz/CustomRadialChart.jsx","article-sections/BookProgression.jsx","article-sections/SmallMultiples.jsx","App.js","index.js"],"names":["styled","OrdinalFrame","props","$sticky","div","Pieces","g","canvasWidth","canvasHeight","Tooltip","$y","$x","SVGCanvas","svg","AnnotationLayer","mostMentions","data","_","get","maxBy","d","mentions","Piece","i","scale","numBars","setHoveredPiece","setMouseX","setMouseY","arcGenerator","arc","startAngle","Math","PI","endAngle","innerRadius","outerRadius","className","type","toLowerCase","onMouseEnter","e","nativeEvent","pageX","pageY","onMouseLeave","CustomRadialChart","useState","hoveredPiece","mouseX","mouseY","scaleLinear","domain","range","height","width","map","key","spell","length","Wrapper","ScrollamaWrapper","StepWrapper","BookProgression","book","setBook","onStepEnter","offset","isEmpty","spells","h3","GlobalStyle","createGlobalStyle","AppWrapper","App","useEffect","window","scrollTo","top","behavior","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.714699f4.chunk.js","sourcesContent":["import React from \"react\";\nimport OrdinalFrame from \"semiotic/lib/OrdinalFrame\";\nimport styled from \"styled-components\";\nimport { scaleSqrt } from \"d3-scale\";\nimport \"./RadialChart.css\";\nimport _ from \"lodash\";\n\nconst Chart = styled(OrdinalFrame)`\n  position: ${(props) => (props.$sticky ? \"sticky\" : null)};\n  top: ${(props) => (props.$sticky ? 0 : null)};\n`;\n\nconst Tooltip = styled.div`\n  display: flex;\n  background-color: white;\n  color: black;\n  border-radius: 10px;\n  height: 80px;\n  width: 180px;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n`;\n\nconst RadialChart = ({ data, xAxis, yAxis, width, height, margin, sticky }) => {\n  const frameProps = {\n    /* --- Data --- */\n    data,\n\n    /* --- Size --- */\n    size: [width, height],\n    margin: margin ? margin : 100,\n\n    /* --- Layout --- */\n    type: \"bar\",\n    projection: \"radial\",\n\n    /* --- Process --- */\n    oAccessor: xAxis,\n    rAccessor: yAxis,\n    rScaleType: scaleSqrt(),\n    oSort: (a, b, aData, bData) => bData[0][yAxis] - aData[0][yAxis],\n\n    /* --- Customize --- */\n    pieceClass: (d) => {\n      let myClass = d.type.toLowerCase();\n      if (d[yAxis] < 3) {\n        myClass += \" insignificant\";\n      }\n      return myClass;\n    },\n    baseMarkProps: {\n      transitionDuration: { default: 2000 },\n    },\n    renderKey: (datapoint) => datapoint.spell,\n\n    /* --- Interact --- */\n    hoverAnnotation: true,\n    tooltipContent: (d) => (\n      <Tooltip>\n        {d.summary[0].data[xAxis]} : {d.summary[0].data[yAxis]}\n      </Tooltip>\n    ),\n\n    /* --- Annotate --- */\n    // oLabel: {\n    //   orient: \"stem\",\n    //   padding: 5,\n    //   label: (d) => (\n    //     <text fill=\"white\" fontSize={12}>\n    //       {d}\n    //     </text>\n    //   ),\n    // },\n  };\n\n  return <Chart {...frameProps} $sticky={sticky} />;\n};\n\nexport default RadialChart;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { arc } from \"d3-shape\";\nimport { scaleLinear } from \"d3-scale\";\nimport _ from \"lodash\";\nimport \"./CustomRadialChart.css\";\nimport { useTransition, animated } from \"react-spring\";\n\nconst canvasWidth = 600;\nconst canvasHeight = 600;\nconst margin = 100;\n\nconst Pieces = styled.g`\n  transform: translate(${canvasWidth / 2}px, ${canvasHeight / 2}px);\n`;\n\nconst Tooltip = styled.div`\n  position: absolute;\n  top: ${(props) => props.$y}px;\n  left: ${(props) => props.$x}px;\n  display: flex;\n  background-color: white;\n  color: black;\n  border-radius: 10px;\n  height: 80px;\n  width: 180px;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n`;\n\nconst SVGCanvas = styled.svg`\n  margin: ${margin}px;\n  position: sticky;\n  top: ${margin}px;\n`;\n\nconst AnnotationLayer = styled.div``;\n\nconst mostMentions = (data) => {\n  return _.get(\n    _.maxBy(data, (d) => d.mentions),\n    \"mentions\"\n  );\n};\n\nconst Piece = ({\n  data,\n  i,\n  scale,\n  numBars,\n  setHoveredPiece,\n  setMouseX,\n  setMouseY,\n}) => {\n  const arcGenerator = arc()\n    .startAngle(((Math.PI * 2) / numBars) * i)\n    .endAngle(((Math.PI * 2) / numBars) * (i + 1))\n    .innerRadius(0)\n    .outerRadius(scale(data.mentions));\n\n  return (\n    <g\n      className={data.type.toLowerCase()}\n      onMouseEnter={(e) => {\n        setHoveredPiece(data);\n        setMouseX(e.nativeEvent.pageX);\n        setMouseY(e.nativeEvent.pageY);\n      }}\n      onMouseLeave={() => {\n        setHoveredPiece(null);\n        setMouseX(null);\n        setMouseY(null);\n      }}\n    >\n      <path d={arcGenerator()} />\n    </g>\n  );\n};\n\nconst CustomRadialChart = ({ data }) => {\n  const [hoveredPiece, setHoveredPiece] = useState(null);\n  const [mouseX, setMouseX] = useState(null);\n  const [mouseY, setMouseY] = useState(null);\n\n  const scale = scaleLinear()\n    .domain([0, mostMentions(data)])\n    .range([0, canvasWidth / 2]);\n\n  return (\n    <>\n      <SVGCanvas height={canvasHeight} width={canvasWidth}>\n        <Pieces>\n          {_.map(data, (d, i) => (\n            <Piece\n              key={d.spell}\n              data={d}\n              i={i}\n              scale={scale}\n              numBars={data.length}\n              setHoveredPiece={setHoveredPiece}\n              setMouseX={setMouseX}\n              setMouseY={setMouseY}\n            />\n          ))}\n        </Pieces>\n      </SVGCanvas>\n      <AnnotationLayer>\n        {hoveredPiece && (\n          <Tooltip key={hoveredPiece.spell} $x={mouseX} $y={mouseY}>\n            {hoveredPiece.spell} : {hoveredPiece.mentions}\n          </Tooltip>\n        )}\n      </AnnotationLayer>\n    </>\n  );\n};\n\nexport default CustomRadialChart;\n","import React, { useState, useEffect } from \"react\";\nimport { Scrollama, Step } from \"react-scrollama\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport RadialChart from \"../data-viz/RadialChart.jsx\";\nimport CustomRadialChart from \"../data-viz/CustomRadialChart.jsx\";\nimport spells from \"../data/spellCounts.json\";\nimport bookTitles from \"../data/bookTitles.js\";\nimport _ from \"lodash\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n`;\n\nconst ScrollamaWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst StepWrapper = styled.div`\n  margin: 50vh 0;\n  font-size: 50px;\n`;\n\nconst BookProgression = () => {\n  const [book, setBook] = useState(null);\n\n  const onStepEnter = ({ data }) => {\n    setBook(data);\n  };\n\n  return (\n    <Wrapper>\n      <ScrollamaWrapper>\n        <Scrollama onStepEnter={onStepEnter} offset={0.5}>\n          {_.range(1, 8).map((book) => (\n            <Step data={book} key={book}>\n              <StepWrapper>{book}</StepWrapper>\n            </Step>\n          ))}\n        </Scrollama>\n      </ScrollamaWrapper>\n      <div>\n        {/* <RadialChart\n          data={spells[book]}\n          xAxis={\"spell\"}\n          yAxis={\"mentions\"}\n          width={window.innerWidth - 100}\n          height={window.innerHeight - 100}\n          sticky={true}\n        /> */}\n        {!_.isEmpty(spells[book]) && <CustomRadialChart data={spells[book]} />}\n      </div>\n    </Wrapper>\n  );\n};\n\nexport default BookProgression;\n","import React, { useState, useEffect } from \"react\";\nimport { Scrollama, Step } from \"react-scrollama\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport RadialChart from \"../data-viz/RadialChart.jsx\";\nimport spells from \"../data/spellCounts.json\";\nimport bookTitles from \"../data/bookTitles.js\";\nimport _ from \"lodash\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: center;\n`;\n\nconst MultipleWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst Title = styled.h3`\n  text-align: center;\n`;\n\nconst SmallMultiples = () => {\n  return (\n    <Wrapper>\n      {_.range(1, 8).map((book) => (\n        <MultipleWrapper>\n          <Title key={`title-${book}`}>{bookTitles[book]}</Title>\n          <RadialChart\n            key={`chart-${book}`}\n            data={spells[book]}\n            xAxis={\"spell\"}\n            yAxis={\"mentions\"}\n            width={500}\n            height={500}\n            sticky={false}\n            margin={50}\n          />\n        </MultipleWrapper>\n      ))}\n    </Wrapper>\n  );\n};\n\nexport default SmallMultiples;\n","import React, { useEffect } from \"react\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport _ from \"lodash\";\nimport BookProgression from \"./article-sections/BookProgression.jsx\";\nimport SmallMultiples from \"./article-sections/SmallMultiples.jsx\";\nimport CustomRadialChart from \"./data-viz/CustomRadialChart.jsx\";\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    background: #302f2c;\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    color: white;\n  }\n\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n      monospace;\n  }\n`;\n\nconst AppWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nfunction App() {\n  // Scroll to the top on render *smoooooothly*\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, []);\n\n  return (\n    <>\n      <GlobalStyle />\n\n      <AppWrapper>\n        <BookProgression />\n        {/* <SmallMultiples /> */}\n      </AppWrapper>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}