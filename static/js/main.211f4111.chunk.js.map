{"version":3,"sources":["fonts/HarryP-Title.ttf","fonts/publico/PublicoText-Roman-Web.woff2","fonts/national/National2Web-Regular.woff","fonts/national/National2Web-Regular.woff2","data-viz/utils.js","data-viz/MovingPiece.jsx","data-viz/LegendRow.jsx","data-viz/Legend.jsx","hooks/useChartDimensions.js","data-viz/CustomRadialChart.jsx","article-sections/BookProgression.jsx","article-sections/SmallMultiples.jsx","article-sections/Header.jsx","fonts/fonts.js","App.js","index.js"],"names":["module","exports","mostMentions","data","_","get","maxBy","d","mentions","getPath","book","spell","maxLength","orderBy","spells","numBars","length","i","findIndex","scale","scaleSqrt","domain","range","pieceData","find","arc","startAngle","Math","PI","endAngle","innerRadius","outerRadius","arcGenerator","getNullPath","MovingPiece","pathA","pathB","useState","mouseLocation","setMouseLocation","showLabel","setShowLabel","console","log","insignificant","animations","useSpring","config","duration","opacity","from","pieceClass","type","toLowerCase","labelX","isNull","window","innerWidth","x","labelY","innerHeight","y","textX","labelWidth","textY","labelHeight","textSize","className","onMouseEnter","e","nativeEvent","clientX","clientY","onMouseLeave","path","fill","height","width","rx","style","font","textAnchor","LegendRow","dms","spellType","spellTypes","percentage","margin","marginBottom","circleX","circleY","percentAnimation","number","textAnimation","circleAnimation","cy","legendR","text","key","interpolate","val","floor","circle","r","cx","Legend","totalMentions","sumBy","numberAnimation","total","mentionsByType","forEach","rankedSpellTypes","transform","marginLeft","marginTop","join","map","parseInt","toFixed","combineChartDimensions","dimensions","parsedDimensions","marginRight","boundedHeight","max","boundedWidth","useChartDimensions","passedSettings","ref","useRef","setWidth","setHeight","useEffect","element","current","resizeObserver","ResizeObserver","entries","Array","isArray","entry","contentRect","observe","unobserve","newSettings","ChartWrapper","styled","div","Pieces","g","props","CustomRadialChart","fullData","currentBook","previousBook","visibleSpells","previousSpells","entering","includes","min","ScrollamaWrapper","StepWrapper","Loading","BookTitle","h3","BookProgression","setBook","setPreviousBook","isEmpty","onStepEnter","direction","offset","bookThoughts","1","2","3","4","5","6","7","Wrapper","DownArrow","ArrowheadDownOutline","Header","currentStep","setCurrentStep","set","display","flexDirection","createGlobalStyle","HarryPotterTitleFont","Publico","NationalWebWoff","NationalWebWoff2","GlobalStyle","AppWrapper","App","scrollTo","top","behavior","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.211f4111.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/HarryP-Title.181ef9a7.ttf\";","module.exports = __webpack_public_path__ + \"static/media/PublicoText-Roman-Web.5f2e0ae8.woff2\";","module.exports = __webpack_public_path__ + \"static/media/National2Web-Regular.dc4310e6.woff\";","module.exports = __webpack_public_path__ + \"static/media/National2Web-Regular.2414fbff.woff2\";","import _ from \"lodash\";\nimport spells from \"../data/spellCounts.json\";\nimport { arc } from \"d3-shape\";\nimport { scaleSqrt } from \"d3-scale\";\n\n// export const canvasWidth = 800;\n// export const canvasHeight = 800;\n// export const margin = 100;\n\nexport const labelHeight = 80;\nexport const labelWidth = 180;\nexport const labelRx = 10;\nexport const textSize = 14;\nexport const legendR = 10;\n\nexport const mostMentions = (data) => {\n  return _.get(\n    _.maxBy(data, (d) => d.mentions),\n    \"mentions\"\n  );\n};\n\nexport const getPath = (book, spell, maxLength) => {\n  const data = _.orderBy(spells[book], [\"mentions\"], [\"desc\"]);\n  const numBars = data.length;\n  const i = _.findIndex(data, { spell });\n\n  if (i === -1) return null;\n  const scale = scaleSqrt()\n    .domain([0, mostMentions(data)])\n    .range([0, maxLength / 2]);\n\n  const pieceData = _.find(data, { spell });\n\n  const arcGenerator = arc()\n    .startAngle(((Math.PI * 2) / numBars) * i)\n    .endAngle(((Math.PI * 2) / numBars) * (i + 1))\n    .innerRadius(0)\n    .outerRadius(scale(pieceData.mentions));\n\n  return arcGenerator();\n};\n\nexport const getNullPath = (book, spell) => {\n  const data = _.orderBy(spells[book], [\"mentions\"], [\"desc\"]);\n  const numBars = data.length;\n  const i = _.findIndex(data, { spell });\n\n  if (i === -1) return null;\n\n  const arcGenerator = arc()\n    .startAngle(((Math.PI * 2) / numBars) * i)\n    .endAngle(((Math.PI * 2) / numBars) * (i + 1))\n    .innerRadius(0)\n    .outerRadius(5);\n\n  return arcGenerator();\n};\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { animated, useSpring } from \"react-spring\";\nimport _ from \"lodash\";\nimport { labelHeight, labelWidth, labelRx, textSize } from \"./utils.js\";\n\nconst MovingPiece = ({ data, pathA, pathB }) => {\n  const [mouseLocation, setMouseLocation] = useState(null);\n  const [showLabel, setShowLabel] = useState(false);\n  console.log({ showLabel });\n  const insignificant = data.mentions < 3;\n\n  const animations = useSpring({\n    config: { duration: 1500 },\n    d: pathB,\n    opacity: insignificant ? 0.4 : 1,\n    from: { d: pathA, opacity: 0 },\n  });\n\n  const pieceClass = `${\n    insignificant ? \"insignificant \" : \"\"\n  }${data.type.toLowerCase()}`;\n\n  const labelX = _.isNull(mouseLocation)\n    ? 0\n    : -window.innerWidth / 2 + mouseLocation.x;\n  const labelY = _.isNull(mouseLocation)\n    ? 0\n    : -window.innerHeight / 2 + mouseLocation.y;\n  const textX = labelX + labelWidth / 2;\n  const textY = labelY + labelHeight / 2 + textSize / 2;\n\n  return (\n    <>\n      <g\n        className={pieceClass}\n        onMouseEnter={(e) => {\n          setMouseLocation({\n            x: e.nativeEvent.clientX,\n            y: e.nativeEvent.clientY,\n          });\n          setShowLabel(true);\n        }}\n        onMouseLeave={() => {\n          setShowLabel(false);\n          setMouseLocation(null);\n        }}\n      >\n        <animated.path {...animations} />\n      </g>\n\n      {showLabel ? (\n        <g>\n          <rect\n            fill=\"white\"\n            x={labelX}\n            y={labelY}\n            height={labelHeight}\n            width={labelWidth}\n            rx={labelRx}\n          ></rect>\n          <text\n            x={textX}\n            y={textY}\n            style={{ font: `${textSize}px` }}\n            textAnchor={\"middle\"}\n          >\n            {data.spell} : {data.mentions}\n          </text>\n        </g>\n      ) : null}\n    </>\n  );\n};\n\nexport default MovingPiece;\n","import React from \"react\";\nimport { legendR } from \"./utils.js\";\nimport { animated, useSpring } from \"react-spring\";\n\nconst LegendRow = ({ dms, i, spellType, spellTypes, percentage }) => {\n  const margin =\n    (dms.marginBottom - spellTypes.length * legendR * 2) /\n    (spellTypes.length + 1);\n\n  const circleX = dms.width * 0.5;\n  const circleY =\n    i === 0\n      ? margin + legendR\n      : (margin + 2 * legendR) * i + (margin + legendR);\n\n  const percentAnimation = useSpring({\n    number: percentage,\n  });\n  const textAnimation = useSpring({\n    y: circleY,\n  });\n  const circleAnimation = useSpring({\n    cy: circleY - legendR / 2,\n  });\n\n  return (\n    <>\n      <animated.text\n        key={`${spellType}-percentage`}\n        x={circleX - (legendR + 50)}\n        y={textAnimation.y}\n        fill=\"white\"\n      >\n        {percentAnimation.number.interpolate((val) => Math.floor(val))}\n      </animated.text>\n      <animated.text\n        key={`${spellType}-percent`}\n        x={circleX - (legendR + 30)}\n        y={textAnimation.y}\n        fill=\"white\"\n      >\n        %\n      </animated.text>\n      <animated.circle\n        key={`${spellType}-circle`}\n        className={spellType}\n        r={legendR}\n        cx={circleX}\n        cy={circleAnimation.cy}\n      />\n      <animated.text\n        key={`${spellType}-label`}\n        x={circleX + legendR + 20}\n        y={textAnimation.y}\n        fill=\"white\"\n      >\n        {spellType}\n      </animated.text>\n    </>\n  );\n};\n\nexport default LegendRow;\n","import React from \"react\";\nimport _ from \"lodash\";\nimport { animated, useSpring } from \"react-spring\";\nimport LegendRow from \"./LegendRow.jsx\";\n\nconst Legend = ({ dms, data }) => {\n  const totalMentions = _.sumBy(data, \"mentions\");\n  const numberAnimation = useSpring({\n    total: totalMentions,\n  });\n\n  let mentionsByType = {};\n\n  const spellTypes = [\"charm\", \"spell\", \"jinx\", \"hex\", \"curse\", \"unforgivable\"];\n  spellTypes.forEach((spellType) => {\n    const mentions = _.sumBy(data, (d) => {\n      if (d.type.toLowerCase() === spellType) {\n        return d.mentions;\n      }\n      return 0;\n    });\n    mentionsByType[spellType] = mentions;\n  });\n\n  const rankedSpellTypes = _.orderBy(\n    spellTypes,\n    (type) => mentionsByType[type],\n    [\"desc\"]\n  );\n\n  return (\n    <g\n      transform={`translate(${[\n        dms.marginLeft,\n        dms.height + dms.marginTop - dms.marginBottom,\n      ].join(\",\")})`}\n    >\n      <text x={dms.width * 0.5 - 60} y={-20} fill=\"white\">\n        Total spell mentions =\n      </text>\n      <animated.text x={dms.width * 0.5 + 107} y={-20} fill=\"white\">\n        {numberAnimation.total.interpolate((val) => Math.floor(val))}\n      </animated.text>\n      {rankedSpellTypes.map((spellType, i) => (\n        <LegendRow\n          key={spellType}\n          dms={dms}\n          i={i}\n          spellType={spellType}\n          spellTypes={spellTypes}\n          percentage={parseInt(\n            ((mentionsByType[spellType] / totalMentions) * 100).toFixed()\n          )}\n        />\n      ))}\n    </g>\n  );\n};\n\nexport default Legend;\n","import { ResizeObserver } from \"@juggle/resize-observer\";\nimport { useRef, useState, useEffect } from \"react\";\n\nconst combineChartDimensions = (dimensions) => {\n  const parsedDimensions = {\n    ...dimensions,\n    marginTop: dimensions.marginTop || 0,\n    marginRight: dimensions.marginRight || 0,\n    marginBottom: dimensions.marginBottom || 0,\n    marginLeft: dimensions.marginLeft || 0,\n  };\n  return {\n    ...parsedDimensions,\n    boundedHeight: Math.max(\n      parsedDimensions.height -\n        parsedDimensions.marginTop -\n        parsedDimensions.marginBottom,\n      0\n    ),\n    boundedWidth: Math.max(\n      parsedDimensions.width -\n        parsedDimensions.marginLeft -\n        parsedDimensions.marginRight,\n      0\n    ),\n  };\n};\n\nconst useChartDimensions = (passedSettings) => {\n  const ref = useRef();\n  const dimensions = combineChartDimensions(passedSettings);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n\n  useEffect(() => {\n    if (dimensions.width && dimensions.height) return [ref, dimensions];\n    const element = ref.current;\n    const resizeObserver = new ResizeObserver((entries) => {\n      if (!Array.isArray(entries)) return;\n      if (!entries.length) return;\n      const entry = entries[0];\n      if (width != entry.contentRect.width) setWidth(entry.contentRect.width);\n      if (height != entry.contentRect.height)\n        setHeight(entry.contentRect.height);\n    });\n    resizeObserver.observe(element);\n    return () => resizeObserver.unobserve(element);\n  }, []);\n\n  const newSettings = combineChartDimensions({\n    ...dimensions,\n    width: dimensions.width || width,\n    height: dimensions.height || height,\n  });\n  return [ref, newSettings];\n};\n\nexport default useChartDimensions;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport _ from \"lodash\";\nimport \"./CustomRadialChart.css\";\nimport MovingPiece from \"./MovingPiece.jsx\";\nimport Legend from \"./Legend.jsx\";\nimport { getPath, getNullPath } from \"./utils.js\";\nimport useChartDimensions from \"../hooks/useChartDimensions.js\";\n\nconst ChartWrapper = styled.div`\n  height: 85vh;\n  margin-right: 20px;\n  width: 90%;\n`;\n\nconst Pieces = styled.g`\n  transform: ${(props) =>\n    `translate(${props.boundedWidth / 2}px, ${props.boundedHeight / 2}px)`};\n`;\n\nconst CustomRadialChart = ({ fullData, currentBook, previousBook }) => {\n  const visibleSpells = _.map(fullData[currentBook], (d) => d.spell);\n  const previousSpells = _.map(fullData[previousBook], (d) => d.spell);\n\n  const chartSettings = { marginBottom: 200 }; // can this be like 20%?\n  const [ref, dms] = useChartDimensions(chartSettings);\n\n  return (\n    <ChartWrapper ref={ref}>\n      <svg height={dms.height} width={dms.width}>\n        <g\n          transform={`translate(${[dms.marginLeft, dms.marginTop].join(\",\")})`}\n        >\n          <Pieces\n            boundedWidth={dms.boundedWidth}\n            boundedHeight={dms.boundedHeight}\n          >\n            {_.map(fullData[currentBook], (d) => {\n              const entering =\n                visibleSpells.includes(d.spell) &&\n                !previousSpells.includes(d.spell);\n\n              return dms.height !== 0 && dms.width !== 0 ? (\n                <MovingPiece\n                  key={`${d.spell}${d.book}`}\n                  data={d}\n                  pathA={\n                    entering\n                      ? getNullPath(currentBook, d.spell)\n                      : getPath(\n                          previousBook,\n                          d.spell,\n                          _.min([dms.boundedWidth, dms.boundedHeight])\n                        )\n                  }\n                  pathB={getPath(\n                    currentBook,\n                    d.spell,\n                    _.min([dms.boundedWidth, dms.boundedHeight])\n                  )}\n                />\n              ) : null;\n            })}\n          </Pieces>\n        </g>\n\n        <Legend dms={dms} data={fullData[currentBook]} />\n      </svg>\n    </ChartWrapper>\n  );\n};\n\nexport default CustomRadialChart;\n","import React, { useState } from \"react\";\nimport { Scrollama, Step } from \"react-scrollama\";\nimport styled from \"styled-components\";\nimport CustomRadialChart from \"../data-viz/CustomRadialChart.jsx\";\nimport spells from \"../data/spellCounts.json\";\nimport _ from \"lodash\";\n\nconst ChartWrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  width: 100%;\n  position: sticky;\n  top: 10%;\n`;\n\nconst ScrollamaWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  align-self: flex-start;\n  margin-left: 50px;\n`;\n\nconst StepWrapper = styled.div`\n  margin: 50vh 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 200px;\n`;\n\nconst Loading = styled.div`\n  margin-top: 40px;\n`;\n\nconst BookTitle = styled.h3`\n  font-size: 1.6em;\n`;\n\nconst BookProgression = () => {\n  const [book, setBook] = useState(1);\n  const [previousBook, setPreviousBook] = useState(0);\n\n  const onStepEnter = ({ data, direction }) => {\n    if (direction === \"up\") setPreviousBook(data + 1);\n    else if (direction === \"down\") setPreviousBook(data - 1);\n    setBook(data);\n  };\n\n  return !_.isEmpty(spells[book]) ? (\n    <>\n      <ChartWrapper>\n        <CustomRadialChart\n          fullData={spells}\n          currentBook={book}\n          previousBook={previousBook}\n        />\n      </ChartWrapper>\n\n      <ScrollamaWrapper>\n        <Scrollama onStepEnter={onStepEnter} offset={0.7}>\n          {_.range(1, 8).map((book) => (\n            <Step data={book} key={book}>\n              <StepWrapper>\n                <BookTitle>Book {book}</BookTitle>\n                <div>{bookThoughts[book]}</div>\n              </StepWrapper>\n            </Step>\n          ))}\n        </Scrollama>\n      </ScrollamaWrapper>\n    </>\n  ) : (\n    <Loading>Loading...</Loading>\n  );\n};\n\nexport default BookProgression;\n\nconst bookThoughts = {\n  1: (\n    <>\n      <p>Turns out there's not actually that much magic in Book 1.</p>\n      <p>\n        The most uttered spell is <strong>Wingardium Leviosa</strong>, which\n        Harry, Ron, and Hermione learn in Charms class and later use to defeat a\n        troll.\n      </p>\n      <p>Click on a spell to see where it's mentioned!</p>\n    </>\n  ),\n  2: <p>thoughts about book 2</p>,\n  3: <p>thoughts about book 3</p>,\n  4: <p>thoughts about book 4</p>,\n  5: <p>thoughts about book 5</p>,\n  6: <p>thoughts about book 6</p>,\n  7: <p>thoughts about book 7</p>,\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport CustomRadialChart from \"../data-viz/CustomRadialChart.jsx\";\nimport spells from \"../data/spellCounts.json\";\nimport bookTitles from \"../data/bookTitles.js\";\nimport _ from \"lodash\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: center;\n`;\n\nconst MultipleWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst Title = styled.h3`\n  text-align: center;\n`;\n\nconst SmallMultiples = () => {\n  return (\n    <Wrapper>\n      {_.range(1, 8).map((book) => (\n        <MultipleWrapper key={book}>\n          <Title key={`title-${book}`}>{bookTitles[book]}</Title>\n          <CustomRadialChart\n            key={`chart-${book}`}\n            data={spells[book]}\n            xAxis={\"spell\"}\n            yAxis={\"mentions\"}\n            width={500}\n            height={500}\n            sticky={false}\n            margin={50}\n          />\n        </MultipleWrapper>\n      ))}\n    </Wrapper>\n  );\n};\n\nexport default SmallMultiples;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { animated, useSpring } from \"react-spring\";\nimport { Scrollama, Step } from \"react-scrollama\";\nimport { ArrowheadDownOutline } from \"@styled-icons/evaicons-outline/ArrowheadDownOutline\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 50px;\n  height: 100vh;\n`;\n\nconst DownArrow = styled(ArrowheadDownOutline)`\n  height: 40px;\n  margin-top: 15px;\n`;\n\nconst Header = () => {\n  const [currentStep, setCurrentStep] = useState(0);\n\n  const [props, set, stop] = useSpring(() => ({ opacity: 1 }));\n\n  const onStepEnter = ({ data }) => {\n    setCurrentStep(data);\n  };\n\n  set({ opacity: currentStep === 3 ? 0 : 1 });\n\n  return (\n    <Wrapper>\n      <Scrollama onStepEnter={onStepEnter} offset={0.2}>\n        <Step data={0} key={0}>\n          <h1>\"It's LeviOsa, not LevioSA!\"</h1>\n        </Step>\n        <Step data={1} key={1}>\n          <h2>\n            ⚡️ Visualizing the spells mentioned across the Harry Potter series\n            ⚡️\n          </h2>\n        </Step>\n        <Step data={2} key={2}>\n          <h3>By Michelle McGhee</h3>\n        </Step>\n        <Step data={3} key={3}>\n          <animated.div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              marginTop: \"100px\",\n              ...props,\n            }}\n          >\n            <div>Scroll to advance the story</div>\n            <DownArrow />\n          </animated.div>\n        </Step>\n      </Scrollama>\n    </Wrapper>\n  );\n};\n\nexport default Header;\n","import { createGlobalStyle } from \"styled-components\";\nimport HarryPotterTitleFont from \"./HarryP-Title.ttf\";\nimport Publico from \"./publico/PublicoText-Roman-Web.woff2\";\nimport NationalWebWoff from \"./national/National2Web-Regular.woff\";\nimport NationalWebWoff2 from \"./national/National2Web-Regular.woff2\";\n\nexport default createGlobalStyle`\n  @font-face {\n    font-family: 'Harry Potter Title';\n    src: url(${HarryPotterTitleFont});\n    font-weight: 300;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: 'Publico';\n    src: url(${Publico});\n    font-weight: 300;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: 'National 2 Web';\n    src: url(${NationalWebWoff}) format('woff2'), url(${NationalWebWoff2}) format('woff');\n    font-weight: 300;\n    font-style: normal;\n  }\n`;\n","import React, { useEffect } from \"react\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport BookProgression from \"./article-sections/BookProgression.jsx\";\nimport SmallMultiples from \"./article-sections/SmallMultiples.jsx\";\nimport Header from \"./article-sections/Header.jsx\";\nimport GlobalFonts from \"./fonts/fonts\";\n\nconst GlobalStyle = createGlobalStyle`\n  h1 {\n    font-family: \"Harry Potter Title\";\n    font-size: 4em;\n  }\n\n  body {\n    background: #302f2c;\n    margin: 0;\n    font-family: 'National 2 Web', 'Helvetica Neue', sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    color: white;\n  }\n\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n      monospace;\n  }\n`;\n\nconst AppWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nfunction App() {\n  // Scroll to the top on render *smoooooothly*\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, []);\n\n  return (\n    <>\n      <GlobalStyle />\n      <GlobalFonts />\n\n      <AppWrapper>\n        <Header />\n        <BookProgression />\n        {/* <SmallMultiples /> */}\n      </AppWrapper>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}