{"version":3,"sources":["fonts/HarryP-Title.ttf","fonts/publico/PublicoText-Roman-Web.woff2","fonts/national/National2Web-Regular.woff","fonts/national/National2Web-Regular.woff2","data-viz/utils.js","data-viz/MovingPiece.jsx","data-viz/LegendRow.jsx","data-viz/Legend.jsx","hooks/useChartDimensions.js","data-viz/CustomRadialChart.jsx","article-sections/BookProgression.jsx","article-sections/SmallMultiples.jsx","article-sections/Header.jsx","fonts/fonts.js","App.js","index.js"],"names":["module","exports","mostMentions","data","_","get","maxBy","d","mentions","getPath","book","spell","maxLength","orderBy","spells","numBars","length","i","findIndex","scale","scaleSqrt","domain","range","pieceData","find","arc","startAngle","Math","PI","endAngle","innerRadius","outerRadius","arcGenerator","getNullPath","MovingPiece","pathA","pathB","useState","mouseLocation","setMouseLocation","showLabel","setShowLabel","insignificant","animations","useSpring","config","duration","opacity","from","pieceClass","type","toLowerCase","labelX","isNull","window","innerWidth","x","labelY","innerHeight","y","textX","labelWidth","textY","labelHeight","textSize","className","onMouseEnter","e","nativeEvent","clientX","clientY","onMouseLeave","path","fill","height","width","rx","style","font","textAnchor","LegendRow","dms","spellType","spellTypes","percentage","margin","marginBottom","circleX","circleY","percentAnimation","number","textAnimation","circleAnimation","cy","legendR","text","key","interpolate","val","floor","circle","r","cx","Legend","totalMentions","sumBy","mentionsByType","forEach","rankedSpellTypes","transform","marginLeft","marginTop","join","map","parseInt","toFixed","combineChartDimensions","dimensions","parsedDimensions","marginRight","boundedHeight","max","boundedWidth","useChartDimensions","passedSettings","ref","useRef","setWidth","setHeight","useEffect","element","current","resizeObserver","ResizeObserver","entries","Array","isArray","entry","contentRect","observe","unobserve","newSettings","ChartWrapper","styled","div","Pieces","g","props","CustomRadialChart","fullData","currentBook","previousBook","visibleSpells","previousSpells","entering","includes","min","Wrapper","ScrollamaWrapper","StepWrapper","Loading","BookProgression","setBook","setPreviousBook","isEmpty","onStepEnter","direction","offset","h3","DownArrow","ArrowheadDownOutline","Header","currentStep","setCurrentStep","set","display","flexDirection","createGlobalStyle","HarryPotterTitleFont","Publico","NationalWebWoff","NationalWebWoff2","GlobalStyle","AppWrapper","App","scrollTo","top","behavior","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.31f0ff2e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/HarryP-Title.181ef9a7.ttf\";","module.exports = __webpack_public_path__ + \"static/media/PublicoText-Roman-Web.5f2e0ae8.woff2\";","module.exports = __webpack_public_path__ + \"static/media/National2Web-Regular.dc4310e6.woff\";","module.exports = __webpack_public_path__ + \"static/media/National2Web-Regular.2414fbff.woff2\";","import _ from \"lodash\";\nimport spells from \"../data/spellCounts.json\";\nimport { arc } from \"d3-shape\";\nimport { scaleSqrt } from \"d3-scale\";\n\n// export const canvasWidth = 800;\n// export const canvasHeight = 800;\n// export const margin = 100;\n\nexport const labelHeight = 80;\nexport const labelWidth = 180;\nexport const labelRx = 10;\nexport const textSize = 14;\nexport const legendR = 10;\n\nexport const mostMentions = (data) => {\n  return _.get(\n    _.maxBy(data, (d) => d.mentions),\n    \"mentions\"\n  );\n};\n\nexport const getPath = (book, spell, maxLength) => {\n  const data = _.orderBy(spells[book], [\"mentions\"], [\"desc\"]);\n  const numBars = data.length;\n  const i = _.findIndex(data, { spell });\n\n  if (i === -1) return null;\n  const scale = scaleSqrt()\n    .domain([0, mostMentions(data)])\n    .range([0, maxLength / 2]);\n\n  const pieceData = _.find(data, { spell });\n\n  const arcGenerator = arc()\n    .startAngle(((Math.PI * 2) / numBars) * i)\n    .endAngle(((Math.PI * 2) / numBars) * (i + 1))\n    .innerRadius(0)\n    .outerRadius(scale(pieceData.mentions));\n\n  return arcGenerator();\n};\n\nexport const getNullPath = (book, spell) => {\n  const data = _.orderBy(spells[book], [\"mentions\"], [\"desc\"]);\n  const numBars = data.length;\n  const i = _.findIndex(data, { spell });\n\n  if (i === -1) return null;\n\n  const arcGenerator = arc()\n    .startAngle(((Math.PI * 2) / numBars) * i)\n    .endAngle(((Math.PI * 2) / numBars) * (i + 1))\n    .innerRadius(0)\n    .outerRadius(5);\n\n  return arcGenerator();\n};\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { animated, useSpring } from \"react-spring\";\nimport _ from \"lodash\";\nimport { labelHeight, labelWidth, labelRx, textSize } from \"./utils.js\";\n\nconst MovingPiece = ({ data, pathA, pathB }) => {\n  const [mouseLocation, setMouseLocation] = useState(null);\n  const [showLabel, setShowLabel] = useState(false);\n\n  const insignificant = data.mentions < 3;\n\n  const animations = useSpring({\n    config: { duration: 1500 },\n    d: pathB,\n    opacity: insignificant ? 0.4 : 1,\n    from: { d: pathA, opacity: 0 },\n  });\n\n  const pieceClass = `${\n    insignificant ? \"insignificant \" : \"\"\n  }${data.type.toLowerCase()}`;\n\n  const labelX = _.isNull(mouseLocation)\n    ? 0\n    : -window.innerWidth / 2 + mouseLocation.x;\n  const labelY = _.isNull(mouseLocation)\n    ? 0\n    : -window.innerHeight / 2 + mouseLocation.y;\n  const textX = labelX + labelWidth / 2;\n  const textY = labelY + labelHeight / 2 + textSize / 2;\n\n  return (\n    <>\n      <g\n        className={pieceClass}\n        onMouseEnter={(e) => {\n          setMouseLocation({\n            x: e.nativeEvent.clientX,\n            y: e.nativeEvent.clientY,\n          });\n          setShowLabel(true);\n        }}\n        onMouseLeave={() => {\n          setShowLabel(false);\n          setMouseLocation(null);\n        }}\n      >\n        <animated.path {...animations} />\n      </g>\n\n      {showLabel ? (\n        <g>\n          <rect\n            fill=\"white\"\n            x={labelX}\n            y={labelY}\n            height={labelHeight}\n            width={labelWidth}\n            rx={labelRx}\n          ></rect>\n          <text\n            x={textX}\n            y={textY}\n            style={{ font: `${textSize}px` }}\n            textAnchor={\"middle\"}\n          >\n            {data.spell} : {data.mentions}\n          </text>\n        </g>\n      ) : null}\n    </>\n  );\n};\n\nexport default MovingPiece;\n","import React from \"react\";\nimport { legendR } from \"./utils.js\";\nimport { animated, useSpring } from \"react-spring\";\n\nconst LegendRow = ({ dms, i, spellType, spellTypes, percentage }) => {\n  const margin =\n    (dms.marginBottom - spellTypes.length * legendR * 2) /\n    (spellTypes.length + 1);\n\n  const circleX = dms.width * 0.5;\n  const circleY =\n    i === 0\n      ? margin + legendR\n      : (margin + 2 * legendR) * i + (margin + legendR);\n\n  const percentAnimation = useSpring({\n    number: percentage,\n  });\n  const textAnimation = useSpring({\n    y: circleY,\n  });\n  const circleAnimation = useSpring({\n    cy: circleY - legendR / 2,\n  });\n\n  return (\n    <>\n      <animated.text\n        key={`${spellType}-percentage`}\n        x={circleX - (legendR + 50)}\n        y={textAnimation.y}\n        fill=\"white\"\n      >\n        {percentAnimation.number.interpolate((val) => Math.floor(val))}\n      </animated.text>\n      <animated.text\n        key={`${spellType}-percent`}\n        x={circleX - (legendR + 30)}\n        y={textAnimation.y}\n        fill=\"white\"\n      >\n        %\n      </animated.text>\n      <animated.circle\n        key={`${spellType}-circle`}\n        className={spellType}\n        r={legendR}\n        cx={circleX}\n        cy={circleAnimation.cy}\n      />\n      <animated.text\n        key={`${spellType}-label`}\n        x={circleX + legendR + 20}\n        y={textAnimation.y}\n        fill=\"white\"\n      >\n        {spellType}\n      </animated.text>\n    </>\n  );\n};\n\nexport default LegendRow;\n","import React from \"react\";\nimport _ from \"lodash\";\nimport LegendRow from \"./LegendRow.jsx\";\n\nconst Legend = ({ dms, data }) => {\n  const totalMentions = _.sumBy(data, \"mentions\");\n  let mentionsByType = {};\n\n  const spellTypes = [\"charm\", \"spell\", \"jinx\", \"hex\", \"curse\", \"unforgivable\"];\n  spellTypes.forEach((spellType) => {\n    const mentions = _.sumBy(data, (d) => {\n      if (d.type.toLowerCase() === spellType) {\n        return d.mentions;\n      }\n      return 0;\n    });\n    mentionsByType[spellType] = mentions;\n  });\n\n  const rankedSpellTypes = _.orderBy(\n    spellTypes,\n    (type) => mentionsByType[type],\n    [\"desc\"]\n  );\n\n  return (\n    <g\n      transform={`translate(${[\n        dms.marginLeft,\n        dms.height + dms.marginTop - dms.marginBottom,\n      ].join(\",\")})`}\n    >\n      {rankedSpellTypes.map((spellType, i) => (\n        <LegendRow\n          key={spellType}\n          dms={dms}\n          i={i}\n          spellType={spellType}\n          spellTypes={spellTypes}\n          percentage={parseInt(\n            ((mentionsByType[spellType] / totalMentions) * 100).toFixed()\n          )}\n        />\n      ))}\n    </g>\n  );\n};\n\nexport default Legend;\n","import { ResizeObserver } from \"@juggle/resize-observer\";\nimport { useRef, useState, useEffect } from \"react\";\n\nconst combineChartDimensions = (dimensions) => {\n  const parsedDimensions = {\n    ...dimensions,\n    marginTop: dimensions.marginTop || 0,\n    marginRight: dimensions.marginRight || 0,\n    marginBottom: dimensions.marginBottom || 0,\n    marginLeft: dimensions.marginLeft || 0,\n  };\n  return {\n    ...parsedDimensions,\n    boundedHeight: Math.max(\n      parsedDimensions.height -\n        parsedDimensions.marginTop -\n        parsedDimensions.marginBottom,\n      0\n    ),\n    boundedWidth: Math.max(\n      parsedDimensions.width -\n        parsedDimensions.marginLeft -\n        parsedDimensions.marginRight,\n      0\n    ),\n  };\n};\n\nconst useChartDimensions = (passedSettings) => {\n  const ref = useRef();\n  const dimensions = combineChartDimensions(passedSettings);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n\n  useEffect(() => {\n    if (dimensions.width && dimensions.height) return [ref, dimensions];\n    const element = ref.current;\n    const resizeObserver = new ResizeObserver((entries) => {\n      if (!Array.isArray(entries)) return;\n      if (!entries.length) return;\n      const entry = entries[0];\n      if (width != entry.contentRect.width) setWidth(entry.contentRect.width);\n      if (height != entry.contentRect.height)\n        setHeight(entry.contentRect.height);\n    });\n    resizeObserver.observe(element);\n    return () => resizeObserver.unobserve(element);\n  }, []);\n\n  const newSettings = combineChartDimensions({\n    ...dimensions,\n    width: dimensions.width || width,\n    height: dimensions.height || height,\n  });\n  return [ref, newSettings];\n};\n\nexport default useChartDimensions;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport _ from \"lodash\";\nimport \"./CustomRadialChart.css\";\nimport MovingPiece from \"./MovingPiece.jsx\";\nimport Legend from \"./Legend.jsx\";\nimport { getPath, getNullPath } from \"./utils.js\";\nimport useChartDimensions from \"../hooks/useChartDimensions.js\";\n\nconst ChartWrapper = styled.div`\n  height: 85vh;\n  position: sticky;\n  top: 10%;\n  margin-right: 20px;\n`;\n\nconst Pieces = styled.g`\n  transform: ${(props) =>\n    `translate(${props.boundedWidth / 2}px, ${props.boundedHeight / 2}px)`};\n`;\n\nconst CustomRadialChart = ({ fullData, currentBook, previousBook }) => {\n  const visibleSpells = _.map(fullData[currentBook], (d) => d.spell);\n  const previousSpells = _.map(fullData[previousBook], (d) => d.spell);\n\n  const chartSettings = { marginBottom: 200 }; // can this be like 20%?\n  const [ref, dms] = useChartDimensions(chartSettings);\n\n  return (\n    <ChartWrapper ref={ref}>\n      <svg height={dms.height} width={dms.width}>\n        <g\n          transform={`translate(${[dms.marginLeft, dms.marginTop].join(\",\")})`}\n        >\n          <Pieces\n            boundedWidth={dms.boundedWidth}\n            boundedHeight={dms.boundedHeight}\n          >\n            {_.map(fullData[currentBook], (d) => {\n              const entering =\n                visibleSpells.includes(d.spell) &&\n                !previousSpells.includes(d.spell);\n\n              return dms.height !== 0 && dms.width !== 0 ? (\n                <MovingPiece\n                  key={`${d.spell}${d.book}`}\n                  data={d}\n                  pathA={\n                    entering\n                      ? getNullPath(currentBook, d.spell)\n                      : getPath(\n                          previousBook,\n                          d.spell,\n                          _.min([dms.boundedWidth, dms.boundedHeight])\n                        )\n                  }\n                  pathB={getPath(\n                    currentBook,\n                    d.spell,\n                    _.min([dms.boundedWidth, dms.boundedHeight])\n                  )}\n                />\n              ) : null;\n            })}\n          </Pieces>\n        </g>\n\n        <Legend dms={dms} data={fullData[currentBook]} />\n      </svg>\n    </ChartWrapper>\n  );\n};\n\nexport default CustomRadialChart;\n","import React, { useState } from \"react\";\nimport { Scrollama, Step } from \"react-scrollama\";\nimport styled from \"styled-components\";\nimport CustomRadialChart from \"../data-viz/CustomRadialChart.jsx\";\nimport spells from \"../data/spellCounts.json\";\nimport _ from \"lodash\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  width: 100%;\n`;\n\nconst ScrollamaWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 10%;\n`;\n\nconst ChartWrapper = styled.div`\n  width: 90%;\n`;\n\nconst StepWrapper = styled.div`\n  margin: 50vh 0;\n  font-size: 50px;\n  height: 200px;\n  display: flex;\n  align-items: center;\n`;\n\nconst Loading = styled.div`\n  margin-top: 40px;\n`;\n\nconst BookProgression = () => {\n  const [book, setBook] = useState(1);\n  const [previousBook, setPreviousBook] = useState(0);\n\n  const onStepEnter = ({ data, direction }) => {\n    if (direction === \"up\") setPreviousBook(data + 1);\n    else if (direction === \"down\") setPreviousBook(data - 1);\n    setBook(data);\n  };\n\n  return !_.isEmpty(spells[book]) ? (\n    <Wrapper>\n      <ScrollamaWrapper>\n        <Scrollama onStepEnter={onStepEnter} offset={0.7}>\n          {_.range(1, 8).map((book) => (\n            <Step data={book} key={book}>\n              <StepWrapper>{book}</StepWrapper>\n            </Step>\n          ))}\n        </Scrollama>\n      </ScrollamaWrapper>\n      <ChartWrapper>\n        <CustomRadialChart\n          fullData={spells}\n          currentBook={book}\n          previousBook={previousBook}\n        />\n      </ChartWrapper>\n    </Wrapper>\n  ) : (\n    <Loading>Loading...</Loading>\n  );\n};\n\nexport default BookProgression;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport CustomRadialChart from \"../data-viz/CustomRadialChart.jsx\";\nimport spells from \"../data/spellCounts.json\";\nimport bookTitles from \"../data/bookTitles.js\";\nimport _ from \"lodash\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: center;\n`;\n\nconst MultipleWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst Title = styled.h3`\n  text-align: center;\n`;\n\nconst SmallMultiples = () => {\n  return (\n    <Wrapper>\n      {_.range(1, 8).map((book) => (\n        <MultipleWrapper key={book}>\n          <Title key={`title-${book}`}>{bookTitles[book]}</Title>\n          <CustomRadialChart\n            key={`chart-${book}`}\n            data={spells[book]}\n            xAxis={\"spell\"}\n            yAxis={\"mentions\"}\n            width={500}\n            height={500}\n            sticky={false}\n            margin={50}\n          />\n        </MultipleWrapper>\n      ))}\n    </Wrapper>\n  );\n};\n\nexport default SmallMultiples;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { animated, useSpring } from \"react-spring\";\nimport { Scrollama, Step } from \"react-scrollama\";\nimport { ArrowheadDownOutline } from \"@styled-icons/evaicons-outline/ArrowheadDownOutline\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 50px;\n  height: 100vh;\n`;\n\nconst DownArrow = styled(ArrowheadDownOutline)`\n  height: 40px;\n  margin-top: 15px;\n`;\n\nconst Header = () => {\n  const [currentStep, setCurrentStep] = useState(0);\n\n  const [props, set, stop] = useSpring(() => ({ opacity: 1 }));\n\n  const onStepEnter = ({ data }) => {\n    setCurrentStep(data);\n  };\n\n  set({ opacity: currentStep === 3 ? 0 : 1 });\n\n  return (\n    <Wrapper>\n      <Scrollama onStepEnter={onStepEnter} offset={0.2}>\n        <Step data={0} key={0}>\n          <h1>\"It's LeviOsa, not LevioSA!\"</h1>\n        </Step>\n        <Step data={1} key={1}>\n          <h2>\n            ⚡️ Visualizing the spells mentioned across the Harry Potter series\n            ⚡️\n          </h2>\n        </Step>\n        <Step data={2} key={2}>\n          <h3>By Michelle McGhee</h3>\n        </Step>\n        <Step data={3} key={3}>\n          <animated.div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              marginTop: \"100px\",\n              ...props,\n            }}\n          >\n            <div>Scroll to advance the story</div>\n            <DownArrow />\n          </animated.div>\n        </Step>\n      </Scrollama>\n    </Wrapper>\n  );\n};\n\nexport default Header;\n","import { createGlobalStyle } from \"styled-components\";\nimport HarryPotterTitleFont from \"./HarryP-Title.ttf\";\nimport Publico from \"./publico/PublicoText-Roman-Web.woff2\";\nimport NationalWebWoff from \"./national/National2Web-Regular.woff\";\nimport NationalWebWoff2 from \"./national/National2Web-Regular.woff2\";\n\nexport default createGlobalStyle`\n  @font-face {\n    font-family: 'Harry Potter Title';\n    src: url(${HarryPotterTitleFont});\n    font-weight: 300;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: 'Publico';\n    src: url(${Publico});\n    font-weight: 300;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: 'National 2 Web';\n    src: url(${NationalWebWoff}) format('woff2'), url(${NationalWebWoff2}) format('woff');\n    font-weight: 300;\n    font-style: normal;\n  }\n`;\n","import React, { useEffect } from \"react\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport BookProgression from \"./article-sections/BookProgression.jsx\";\nimport SmallMultiples from \"./article-sections/SmallMultiples.jsx\";\nimport Header from \"./article-sections/Header.jsx\";\nimport GlobalFonts from \"./fonts/fonts\";\n\nconst GlobalStyle = createGlobalStyle`\n  h1 {\n    font-family: \"Harry Potter Title\";\n    font-size: 4em;\n  }\n\n  body {\n    background: #302f2c;\n    margin: 0;\n    font-family: 'National 2 Web', 'Helvetica Neue', sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    color: white;\n  }\n\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n      monospace;\n  }\n`;\n\nconst AppWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nfunction App() {\n  // Scroll to the top on render *smoooooothly*\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, []);\n\n  return (\n    <>\n      <GlobalStyle />\n      <GlobalFonts />\n\n      <AppWrapper>\n        <Header />\n        <BookProgression />\n        {/* <SmallMultiples /> */}\n      </AppWrapper>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}